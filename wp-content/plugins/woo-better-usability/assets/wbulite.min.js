jQuery(document).ready(function(b){wbuGlobalQtyElement=null;wbuAjaxQueue=[];wbuEnqueueAjax=function(e){wbuAjaxQueue.push(e);wbuRunQueuedAjax()};wbuRunQueuedAjax=function(){if(wbuAjaxQueue.length){var f=wbuAjaxQueue[0];f.complete=function(){wbuAjaxQueue.shift();wbuRunQueuedAjax()};var e=b.ajax(f)}};wbuQtyChangeCart=function(e){if(!wbuZeroQuantityCheck(e)){return false}if(e.val()==0){removeLink=e.closest(".cart_item").find(".product-remove a");removeLink.trigger("click");return false}if(wbuSettings.cart_ajax_method=="simulate_update_button"){wbuSimulateUpdateCartButtonClick(e)}else{wbuMakeAjaxCartUpdate(e)}wbuAfterCallUpdateCart(e);return true};wbuMakeAjaxCartUpdate=function(e){if(typeof e.attr("name")=="undefined"){return}matches=e.attr("name").match(/cart\[(\w+)\]/);if(matches===null){return}form=e.closest("form");b("<input type='hidden' name='update_cart' id='update_cart' value='1'>").appendTo(form);b("<input type='hidden' name='is_wbu_ajax' id='is_wbu_ajax' value='1'>").appendTo(form);wbuGlobalQtyElement=e;cart_item_key=matches[1];form.append(b("<input type='hidden' name='cart_item_key' id='cart_item_key'>").val(cart_item_key));formData=form.serialize();b("button[name='update_cart']").addClass("disabled");if(wbuSettings.cart_updating_display=="yes"){if(wbuSettings.cart_updating_location=="checkout_btn"){b("a.checkout-button.wc-forward").addClass("disabled").html(wbuSettings.cart_updating_text)}else{b("button[name='update_cart']").html(wbuSettings.cart_updating_text)}}b.ajax({url:form.attr("action"),type:"POST",data:formData,dataType:"json",beforeSend:function(){d(b(".woocommerce-cart-form"))},success:function(f){wbuAjaxCartUpdateCallback(f);a(b(".woocommerce-cart-form"))}})};wbuAjaxCartUpdateCallback=function(e){b(".cart-collaterals").html(e.html);wbuGlobalQtyElement.closest(".cart_item").find(".product-subtotal").html(e.price);b("#update_cart").remove();b("#is_wbu_ajax").remove();b("#cart_item_key").remove();b("button[name='update_cart']").removeClass("disabled");if(wbuSettings.cart_updating_display=="yes"){if(wbuSettings.cart_updating_location=="checkout_btn"){b("a.checkout-button.wc-forward").removeClass("disabled").html(e.checkout_label)}else{b("button[name='update_cart']").html(e.update_label)}}if(b(".woocommerce-checkout").length){b(document.body).trigger("update_checkout")}b(document.body).trigger("updated_cart_totals");b(document.body).trigger("wc_fragment_refresh")};wbuSimulateUpdateCartButtonClick=function(e){if(wbuSettings.cart_updating_display=="yes"){if(wbuSettings.cart_updating_location=="checkout_btn"){b("a.checkout-button.wc-forward").html(wbuSettings.cart_updating_text)}else{b("button[name='update_cart']").html(wbuSettings.cart_updating_text)}}setTimeout(function(){b("button[name='update_cart']").trigger("click")},20)};wbuWhenCartUpdated=function(e){wbuLockQtyInput();wbuAddItemRemoveEffect()};wbuAfterCallUpdateCart=function(e){};wbuAddItemRemoveEffect=function(){};wbuZeroQuantityCheck=function(e){if(wbuInfo.isCart&&(e.val()==0)&&(wbuSettings.confirmation_zero_qty==="yes")){if(!confirm(wbuSettings.zero_qty_confirmation_text)){e.val(1);return false}}return true};wbuListenChange=function(){if(wbuSettings.enable_auto_update_cart=="yes"){b(document.body).on("change",".woocommerce-cart-form .qty",function(){return wbuQtyChangeCart(b(this))})}};wbuCartDeleteEvent=function(){};wbuQtyButtons=function(){b(document.body).on("click",".wbu-btn-inc",function(){return wbuQtyButtonClick(b(this),1)});b(document.body).on("click",".wbu-btn-sub",function(){return wbuQtyButtonClick(b(this),-1)});wbuLockQtyInput()};wbuQtyButtonClick=function(f,e){inputQty=f.parent().find(".qty");newQty=parseInt(inputQty.val())+e;if(f.hasClass("disabled")){return false}minAttr=inputQty.attr("min");if(typeof minAttr!==typeof undefined&&minAttr!==false&&newQty<parseInt(minAttr)){return false}maxAttr=inputQty.attr("max");if(typeof maxAttr!==typeof undefined&&maxAttr!==false&&newQty>parseInt(maxAttr)){return false}if(inputQty.is("select")&&(inputQty.find('option[value="'+newQty+'"]').length===0)){return false}inputQty.val(newQty);inputQty.change();return false};wbuLockQtyInput=function(){if(wbuSettings.qty_buttons_lock_input=="yes"){b(".qty").attr("readonly","readonly").css("background-color","lightgray")}};wbuQtyOnShop=function(){if(wbuSettings.enable_quantity_on_shop!="yes"){return}b("form.cart").off("change.wbu_form_cart_qty").on("change.wbu_form_cart_qty",".qty",function(){jQuery(".ajax_add_to_cart").each(function(){var e=jQuery(this).parent().find(".qty").val();jQuery(this).data("quantity",e);jQuery(this).attr("data-quantity",e)})});b(".add_to_cart_button").off("click.wbu_add_cart_btn").on("click.wbu_add_cart_btn",function(){return true});b(document).ajaxComplete(function(){})};wbuQtyOnCheckout=function(){if(!wbuInfo.isCheckout||(wbuSettings.checkout_allow_change_qty!="yes")){return}b("form.checkout").on("change",".qty",function(){var e={action:"wbu_update_checkout",security:wc_checkout_params.update_order_review_nonce,post_data:b("form.checkout").serialize()};jQuery.post(wbuInfo.ajaxUrl,e,function(f){b("body").trigger("update_checkout")})});b("body").on("updated_checkout",function(){quantityTitle='<div class="checkout-qty-title">'+wbuInfo.quantityLabel+"</div>";b(".shop_table th.product-name").append(quantityTitle)})};wbuProductAddToCartAjax=function(){b(".qty").on("change",function(){var e=b(this).val();b(".add_to_cart_button").data("quantity",e).attr("data-quantity",e);b('[name="add-to-cart"]').data("quantity",e).attr("data-quantity",e)})};wbuCheckHideUpdateCartBtn=function(){if(wbuSettings.cart_hide_update=="yes"){b('button[name="update_cart"]').hide();b(".fusion-update-cart").hide()}};var d=function(e){if(!c(e)){e.addClass("processing").block({message:null,overlayCSS:{background:"#fff",opacity:0.6}})}};var a=function(e){e.removeClass("processing").unblock()};var c=function(e){return e.is(".processing")||e.parents(".processing").length};wbuListenChange();wbuQtyButtons();wbuCartDeleteEvent();wbuQtyOnShop();wbuQtyOnCheckout();wbuProductAddToCartAjax();if(wbuInfo.isShop&&wbuSettings.hide_addtocart_button==="yes"){b(".add_to_cart_button").hide()}if(wbuInfo.isCart&&wbuSettings.cart_hide_update==="yes"){b(".fusion-update-cart").hide()}if(wbuSettings.cart_hide_quantity=="yes"){b(".product-quantity").parent().find("th").css("width","100%");b(".product-quantity").hide()}if(wbuInfo.isCart){if(wbuSettings.cart_fix_enter_key=="yes"){b(".woocommerce-cart-form .qty.text").on("keyup keypress",function(g){var f=g.keyCode||g.which;if(f===13){b(".woocommerce-cart-form .qty.text").trigger("blur");g.preventDefault();return false}})}wbuCheckHideUpdateCartBtn()}b(document).on("updated_wc_div",function(){wbuCheckHideUpdateCartBtn();wbuWhenCartUpdated()});b(document).on("added_to_cart",function(){if(wbuSettings.hide_viewcart_link==="yes"){b(".added_to_cart").hide()}});b(document).on("click",".mini-cart-box .remove",function(){var e=b(this).data("product_id");b(".shop_table").find(".remove").each(function(){if(e==b(this).data("product_id")){b(this).trigger("click")}});return false})});